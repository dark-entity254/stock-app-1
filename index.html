<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIM3Z & DOZ3NZ - 3D PRO</title>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <style>
        :root { --neon-green: #39ff14; --neon-cyan: #00ffff; --gold: #ffd700; }
        body {
            margin: 0; padding: 0; background: url('background.png') no-repeat center center fixed;
            background-size: cover; color: white; font-family: 'Segoe UI', sans-serif; height: 100vh;
            overflow: hidden; display: flex; flex-direction: column; align-items: center;
        }
        .overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1; }
        .ui-layer { position: relative; z-index: 10; text-align: center; width: 100%; padding: 20px; }
        h1 { color: var(--gold); text-shadow: 0 0 15px var(--gold); margin: 0; font-size: 1.8rem; letter-spacing: 3px; }
        .search-row { margin: 15px 0; display: flex; justify-content: center; gap: 10px; }
        input { background: rgba(0,0,0,0.7); border: 1px solid var(--neon-cyan); padding: 10px; color: white; border-radius: 4px; width: 140px; }
        button { background: var(--gold); border: none; padding: 10px 20px; border-radius: 4px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        button:hover { box-shadow: 0 0 15px var(--gold); transform: scale(1.05); }
        .big-price { font-size: 3.5rem; font-weight: 900; color: var(--neon-green); text-shadow: 0 0 20px var(--neon-green); margin: 5px 0; }
        #chart-3d { position: absolute; bottom: 0; width: 100%; height: 65vh; z-index: 5; }
        #clock { position: absolute; bottom: 20px; right: 20px; font-family: monospace; font-size: 1.4rem; color: var(--neon-cyan); text-shadow: 0 0 10px var(--neon-cyan); z-index: 10; }
    </style>
</head>
<body onload="startTime()">
    <div class="overlay"></div>
    <div class="ui-layer">
        <h1>DIM3Z & DOZ3NZ</h1>
        <div class="search-row">
            <input type="text" id="ticker" placeholder="SYMBOL (AAPL)">
            <button onclick="fetch3D()">LOAD 3D AXIS</button>
        </div>
        <div id="displaySymbol" style="color: var(--neon-cyan); font-weight: bold; font-size: 1.2rem;">DATA STREAM OFFLINE</div>
        <div class="big-price" id="displayPrice">$0.00</div>
    </div>
    <div id="chart-3d"></div>
    <div id="clock">00:00:00</div>

    <script>
        function startTime() {
            document.getElementById('clock').innerHTML = new Date().toLocaleTimeString();
            setTimeout(startTime, 1000);
        }

        async function fetch3D() {
            const symbol = document.getElementById('ticker').value.toUpperCase();
            const apiKey = 'YOUR_API_KEY'; 
            try {
                const res = await fetch(`https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=${symbol}&apikey=${apiKey}`);
                const data = await res.json();
                const ts = data['Time Series (Daily)'];
                const dates = Object.keys(ts).slice(0, 20).reverse();
                const prices = dates.map(d => parseFloat(ts[d]['4. close']));

                document.getElementById('displaySymbol').innerText = "LIVE SIGNAL: " + symbol;
                document.getElementById('displayPrice').innerText = `$${prices[prices.length - 1].toFixed(2)}`;
                render3DGrid(dates, prices);
            } catch (e) { alert("API Error or Limit Reached."); }
        }

        function render3DGrid(dates, prices) {
            // Generating multiple data rows to create a "ribbon" width on the Y-Axis
            const zValues = [ prices, prices.map(p => p * 1.005), prices.map(p => p * 0.995) ];
            const xLabels = dates.map(d => d.split('-').slice(1).join('/'));

            const trace = {
                z: zValues,
                x: xLabels,
                y: ['Low', 'Mid', 'High'],
                type: 'surface',
                colorscale: [[0, '#ff3131'], [0.5, '#00ffff'], [1, '#39ff14']],
                showscale: false,
                lighting: { ambient: 0.9, diffuse: 0.5, specular: 1, roughness: 0.1 }
            };

            const layout = {
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                margin: { l: 0, r: 0, b: 0, t: 0 },
                scene: {
                    aspectmode: 'manual',
                    aspectratio: { x: 2, y: 1, z: 1 },
                    xaxis: { title: 'DATE', color: '#00ffff', showgrid: true, zeroline: false, gridcolor: '#334155' },
                    yaxis: { title: 'DEPTH', color: '#00ffff', showgrid: true, gridcolor: '#334155' },
                    zaxis: { title: 'PRICE', color: '#ffd700', showgrid: true, gridcolor: '#334155' },
                    camera: { eye: { x: 1.8, y: 1.8, z: 1.2 } }
                }
            };

            Plotly.newPlot('chart-3d', [trace], layout, {responsive: true, displayModeBar: false});
        }
    </script>
</body>
</html>
